<!DOCTYPE html>
<html lang="fr">
<HEAD>
<title>Bibliographie | Tractatus Ayyew - Earthbook</title>
<meta charset="UTF-8"> 


<!--
o               .        ___- -___                    .                   
       .              .-\          -.     .     .         .
                    ./.;_.\     __/~ \.     
                   /;  / `-'  __\    . \                            
 .        .       /  ,-'     / .   .;   \        |
                 | .|       /       __   |      -O-       .
                |__/    __ |  . ;   \ | . |      |
                |      /  \\_    . ;| \___|    
   .    o       |      \  .~\\___,-'      |           .
                 |     | . ; ~~~~\_    __|
    |             \    \   .  .  ; \  /_/   .
   -O-        .    \   /         . |  ~/                  .
    |    .          ~\ \   .      /  /~          o
  .                   ~- ___ ; ___-~       
                 .          -_-         .              -JT


EARTHBOOK - Un format de livre open source, human-friendly et Earth-friendly.
Lis le livre. AmÃ©liorez, traduisez ou commentez le contenu. Ou bifurquez le code et publiez le vÃ´tre.
 

Page de destination - version 1.2
CrÃ©Ã© par Russell Maier en tant que format d'Ã©dition qui incarne pleinement les principes de l'Ã©thique Earthen pour permettre l'Ã©dition de livres verts en ligne.
Premier EarthBook, le Tractatus Ayyew, publiÃ© le 22.12.22.

LicenceÂ : Licence publique gÃ©nÃ©rale GNU v2 ou ultÃ©rieure
URI de la licenceÂ : https://www.gnu.org/licenses/gpl-2.0.html
Tous les fichiers, sauf indication contraire, sont publiÃ©s sous GNU General Public
Licence version 2.0 (https://www.gnu.org/licenses/gpl-2.0.html)
Voir le rÃ©fÃ©rentiel complet du projet surÂ : https://github.com/russs95/earthbook
Pour les principes du Earthbook, voir le Tractatus AyyewÂ : https://book.earthe.io
*/
-->
<link rel="apple-touch-icon" sizes="180x180" href="../favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../favicons/favicon-16x16.png">
<!--<link rel="manifest" href="../favicons/site.webmanifest">-->

<link rel="canonical" href="https://book.earthen.io/fr/biblio.html"> 
<link rel="alternate" href="https://book.earthen.io/en/bibliography.html" hreflang="en" >
<link rel="alternate" href="http://book.earthen.io/en/bibliography.html" hreflang="x-default" >
<link rel="alternate" href="https://book.earthen.io/fr/biblio.html" hreflang="fr" >
<!--
<link rel="alternate" href="https://book.earthen.io/es/" hreflang="es" >
<link rel="alternate" href="https://book.earthen.io/id/" hreflang="id" >-->



<!--BOOK META TAGS
Ces balises seront cohÃ©rentes pour l'ensemble du livre-->

<meta name="keywords" content="auteurs, russell, maier, banayan, irene, angway, Ã©criture, paternitÃ©, auteur, Ã©crivains">
<meta name="description" content="DÃ©claration d'intÃ©rÃªts et d'investissements des auteurs
">

<meta property="article:publisher" content="Earthen.io" >
<meta name="author" content="Russell Maier & Banayan Angway">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta property="article:modified_time" content="2023-8-01T09:14:13+00:00" >
  
<!-- Facebook Open Graph Tags for social sharing-->
<meta property="og:site_name" content="Tracatus Ayyew">
<meta property="article:publisher" content="Earthen.io" >
<meta property="og:type"          content="book">
<meta property="og:title"         content="Bibliographie - Tracatus Ayyew">
<meta property="og:description"   content="DÃ©claration d'intÃ©rÃªts et d'investissements des auteurs">
<meta property="og:image"         content="../covers/TA-cover-french-1200px.png">
<meta property="og:image:type" content="image/png" >
<meta property="og:image:width" content="1000px" >
<meta property="og:image:height" content="1492px" >
<meta property="og:locale" content="fr_FR" >
<meta property="og:url" content="https://book.earthen.io/fr/biblio.html">

<script>
      // Declare the global variables
    var chapNo = "Annexe";
    var chapName = "Bibliographie";

    if ('serviceWorker' in navigator) {
      window.addEventListener('load', function() {
        navigator.serviceWorker.register('../service-worker.js?v=2').then(function(registration) {
          console.log('ServiceWorker registration successful with scope:', registration.scope);
        }, function(error) {
          console.log('ServiceWorker registration failed:', error);
        });
      });
    }
</script>

 <!--FONTS
starts loading the fonts-->

<link rel="preconnect" href="../fonts/">
<link rel="preconnect" href="../fonts/" crossorigin> 

<!-- PRELOADS-->
<link rel="preload" as="image" href="../svgs/00-dark.svg">
<link rel="preload" as="image" href="../svgs/00-white.svg">


 <!-- STYLE SHEETS   
All the css needed for this page-->
 
<link rel="stylesheet" href="../style-sheet.css?v=2">
<link rel="stylesheet" href="../stylesheet-chapter.css?v=1.2">
<link rel="stylesheet" href="../light.css">
<link rel="stylesheet" href="../light.css" media="(prefers-color-scheme: light)">
 <link rel="stylesheet" href="../dark.css" media="(prefers-color-scheme: dark)">
 <link rel="stylesheet" href="../slider.css">

 
 <!-- INCLUDES
 Main Scripts-->   
 <script type="module" src="../dark-mode-toggle.mjs.js" async></script>
 <script src="../universal-javascript.js?v=2" defer></script>
 <script src="../content-javascript.js?v=2.2" defer></script>
 <script src="../clip/dist/clipboard.min.js" defer></script>

 <!--PAGE INCLUDES
All the page components required to build this page-->

<!--1--><script src="includes/header-component.js"  async></script>
<!--2--><script src="includes/settings-curtain.js"  defer></script>
<!--3--><script src="includes/content-curtain.js"  defer></script>
<!--4--><script src="includes/share-curtain.js"  defer></script>
<!--5--><script src="includes/buy-curtain.js"  defer></script>
<!--6--><script src="includes/bookplate-curtain.js"  defer></script>
<!--7--><script src="includes/earthbook-curtain.js"  defer></script>
<!--8--><script src="includes/footer-component.js" defer></script>
<!--9--><script src="includes/read-curtain.js" defer></script>
<!--10--><script src="includes/tour-curtain.js"  defer></script>
<!--11--><script src="includes/search-curtain.js"  defer></script>
<!--12--><script src="includes/eco-curtain.js"  defer></script>
<!--13--><script src="includes/chap-foot.js" defer></script>
<style>



@font-face {
  font-family: "CooperLt";
  font-style: normal;
  src: url("../fonts/CooperLightBT.ttf");
  font-display: swap;
 }

 @font-face {
  font-family: "CooperLt";
  font-style: italic;
  src: url("../fonts/CooperLtBTLightItalic.ttf");
  font-display: swap;
 }

 @font-face {
  font-family: "CooperLtMedium";
  src: url("../fonts/CooperMediumBT.ttf");
  font-display: swap;
 }

 @font-face {
  font-family: "Mulish";
  src: url("../fonts/Mulish-Light.ttf");
  font-display: swap;
 }


 #earthbook-navbar {

  background-color: var(--header-footer);
  border-color: var(--thin-border-color);
  box-shadow: var(--element-shadow);
}



#ct-chapter-title {
    font-size: 10vmin;
      letter-spacing: 2px;
    }



</STYLE>

</HEAD>

<BODY class="accessibility-plugin-ac">

    <!--TOUR-CURTAIN-->
    <tour-curtain></tour-curtain>
    
    
     
  <div id="underlayer" class="accessibility-plugin-ac" >

    <div id="top"></div>

  <!--HEADER NAVBAR-->
  <header-component></header-component>

  <div id="ct-chapter-top">
  <button type=button id="ct-tc-menu" onclick="openContents()" aria-label="Open Table of Contents"></button>
  <div class="ct-holder" style="cursor:pointer;" onclick="openContents()">
        <div id="ct-chapter-title">Bibliographie</div>
        <div id="ct-book-title">Tractatus Ayyew</div>
        <div id="ct-chap-location">Annexe</div>
        <div id="ct-word-count"><i>Sources et RÃ©fÃ©rences</i></div>
      </div>
  </div>



<!-- Page Title Section-->

<div id="ct-chapt-graphic" class="background-000"></div>
<div id="up-arrow"></div>

<div id="ct-main">

    <div id="chap-notice">
    <div id="close-notice" onclick="closeWelcomeNotice()">&times;</div>
    <div id="chap-notice-text">
        ðŸ’¡  Il semble que c'est votre premiÃ¨re fois Ã  ouvrir ce livre! Avant de commencer, envisagez de prendre le rapide <span class="java-link" onclick="guidedTour(), closeWelcomeNotice()" title="En savoir plus sur ce qu'est un Earthbook">tour des fonctionnalitÃ©s de Earthbook</span> et assurez-vous de <span class="java-link"  onclick="openSettings(), closeWelcomeNotice()"  title="Ajuster pour vos yeux">optimiser Â±</span> la page pour vos yeux.
    </div>
    </div>

    <div id="test" onclick="openBooknotes();">PLEASE TEST</div> 

    <div class="page-paragraph">

        <p id="4-8-01">Sources listed in order of appearance in the book.</p>
        <br>

        <div id="line" style="margin-top: 15px"></div>

        <br><br><br>
        
        <p id="4-8-02">RÃ©gis Debray, <i>Le siÃ¨cle vert. Un changement de civilisation</i> (Editions Gallimard, 2020)</p>

        <p id="4-8-03">Bill Mollison, <i>Principles from Permaculture a Designers' Manual</i>, (Tagari Publishers: 1988).</p>
            
        <p id="4-8-04">Daniel Pinchbeck, Sting, Russell Brand <i>How Soon is Now: From Personal Initiation to Global Transformation</i>, (Publisher: Watkins Publishing, 2017)</p>
        
        <p id="4-8-05"><i>Sustainable Packaging: Consumer View</i>, (Global Web Index: 2020)</p>
            
        <p id="4-8-06">R. Geyer, et al., <i>Production, use and fate of all plastics ever made </i>(Science Advances, 2017) Vol. 3, no. 7.</p>
            
        <p id="4-8-07">Ansje Lohr, Heidi Savelli, Raoul Beunen, Marco Kalz, Ad Ragas, Frank Van Belleghem, <i>Solutions for global marine litter pollution</i>,  (sciencedirect.com: Current opinion in Environmental Sustainability, Vol 28, October 2017) 90-99</p>
            
        <p id="4-8-08"><i>Plastic & Climate: The Hidden Costs of a Plastic Planet</i> (Center for International Environmental Law, 2019).</p>
            
        <p id="4-8-09">Russell Maier, <i>Recycling: The Evil Illusion</i>, (Medium.com, 2016).</p>
            
        <p id="4-8-10">Mike Pearl, <i>Climate Despair Is Making People Give Up on Life</i> (Vice Magazine, 2019).</p>
            
        <p id="4-8-11">D. Gilford et al, <i>The Emotional Toll of Climate Change on Science Professionals</i>, (2019) </p>
            
        <p id="4-8-12">Steven W. Running, <i>The 5 Stages of Climate Grief</i> (University of Montana, Missoula: Numerical Terradynamic Simulation Group Publications: 2017).</p>
            
        <p id="4-8-13">Guido Tonelli, <i>Genesis: The Story of How Everything Began</i>, trans. Erica Segre, Simon Carnell (Farrar, Straus and Giroux, 2021).</p>
            
        <p id="4-8-14">Rye, R., Kuo, P.HO., and Holland,H.D., <i>Atmospheric carbon dioxide concentrations before 2.2 billion years ago</i> (Nature,  1995), 379, 6013-75.</p> 
            
        <p id="4-8-15">Thomas Nail, <i>Theory of the Earth</i> (Standford University Press, 2021).</p>
            
        <p id="4-8-16">Jeremy L. England et al. (2015), <i>In the beginning: The full story of life on Earth can finally be told</i>. (NewScientist, 2019). </p> 
            
        <p id="4-8-17">Bekker, A., Holland,Wang, P. et al., <i>Dating the rise of atmospheric oxygen</i>, (Nature, 2004) 427, 117-20.</p>
            
        <p id="4-8-18">David M. Raup and J. John Sepkoski, Jr., <i>Mass Extinctions in the Marine Fossil Record</i>, (American Association for the Advancement of Science, 1982) Vol 215, Issue 4539.</p>
            
        <p id="4-8-19"><i>UK Oil consumption</i>, (British Plastics Federation, 2008), Ref PD/LFH/19/8/08. </p>
            
        <p id="4-8-20">Russell Maier, Ani Himawati, <i>The Rise of the Regenerative Ecobrick Movement</i>, (Le Havre University: Bandung Spirit Conference, 2019).</p>
            
        <p id="4-8-21">Susan Freinkel, <i>Plastic: A Toxic Love Story</i>, (Houghton Mifflin Publishing Company, 2011), p7.  </p>
            
        <p id="4-8-22">Carmen Nobel, <i>How Cellophane Changed the Way We Shop for Food</i>, (Harvard Business School, 2017).</p>
            
        <p id="4-8-23"><i>Beyond Storms & Droughts: The Psychological Impacts of Climate</i> (American Psychologists Association, 2014). </p> 
            
        <p id="4-8-24"><i>Mental Health and Our Changing Climate: Impacts, Implications, and Guidance  </i>(American Psychologists Association, 2017).</p>
            
        <p id="4-8-25">David Beerling, (2007) <i>The Emerald Planet, Oxford University Press</i></p>
            
        <p id="4-8-26">Rutger Bergman, <i>Humankind: A Hopeful History</i>, (Little, Brown and Company, 2019).</p>
            
        <p id="4-8-27">Dobyns, Henry F., An Appraisal of Techniques with a New Hemispheric Estimate, (Current Anthropology, 1966) Issue 7, no. 4 : p395â€“416. </p>
            
        <p id="4-8-28">Charles C. Man, <i>1491</i>, (Vintage Publishing, 2006).</p>
            
        <p id="4-8-29">C. Ballard, <i>The Salmon Weir on Green River in Western Washington</i>, (Davidson Journal of Anthropology, 1957) Vol. 3 No. 1, Summer, pp. 37-54.</p>
            
        <p id="4-8-30">George Vancouver, <i>A Voyage of Discovery to the North Pacific Ocean, and Round the World</i>, vol. 2 (London: G. G. and J. Robinson, Paternoster-Row; and J. Edwards, Pall-Mall, 1798), 220â€“28, 288â€“89. Chapter 4, 2nd of May 1792</p>

        <p id="4-8-31">Gabriel Popkin, <i>Forest Gardens Show how native land stewardship can outdo nature,</i> (National Geographic: 2021)</p>

        <p id="4-8-32">Campbell, S. K., and V. L. Butler, <i>Archaeological Evidence for Resilience of Pacific Northwest Salmon Populations and the Socioecological System over the last ~7,500 years</i>, (Ecology & Science, 2021) Vol. 15, No. 1, Art. 17</p>
        
        <p id="4-8-33">A. Groesbeck AS, Rowell K, Lepofsky D, Salomon AK, <i>Ancient Clam Gardens Increased Shellfish Production: Adaptive Strategies from the Past Can Inform Food Security Today</i>, (PLoS ONE, 2014) 9(3): e91235.</p>
        
        <p id="4-8-34">David Graeber, David Wengrow, <i>The Dawn of Everything: A New History of Humanity</i>, (Signal Publishing, 2021).</p>
        
        <p id="4-8-35">Jack D. Forbes, <i>Indigenous Americans: Spirituality and Ecos</i>, (DÃ¦dalus, 2021).</p>
        
        <p id="4-8-36">Enrique SalmÃ³n, <i>Kincentric Ecology: Indigenous Perceptions of the Human-Nature Relationship</i>, Ecological Applications, (Ecological Society of America, Oct., 2000) Vol. 10, No. 5, pp. 1327-1332.</p>
        
        <p id="4-8-37">Berkes, F., <i>Sacred Ecology</i>. Third edition. Â (New York: Routledge 2012) Chapter 5, p.105.</p>
        
        <p id="4-8-38">Carolyn Merchant, <i>The Death of Nature: Women, Ecology and the Scientific Revolution</i>, (Harper & Row, 1980).</p>
        
        <p id="4-8-39">Theodore Hieber, <i>Retranslating Genesis 1â€“2: Reconnecting Biblical Thought and Contemporary Experience</i> (Sage Journals, 2019) Vol 70, Issue 3.</p>
        
        <p id="4-8-40">Timothy Morton, <i>Ecology without Nature: Rethinking Environmental Aesthetics</i>, (Harvard University Press, 2007).</p> 	
        
        <p id="4-8-41">Seline Meijer, <i>People and nature blur in the world's indigenous languages</i>, (IUCN: Planet at the Crossroads, 2017).</p>
        
        <p id="4-8-42">Thomas Hutton, <i>A Theory of the Earth</i>, Royal Society of Edinburgh, (Transactions of the Royal Society of Edinburgh, 1788) Vol. 1.</p>
            
            <br><br>
        
  </div><!--Closes paragraph div-->

</div><!--Closes main content block-->


<!--SEARCH-CURTAIN-->
<search-curtain></search-curtain>

<!--MENU DU CONTENU-->
<content-curtain></content-curtain>

<!--MENU DES PARAMÃˆTRES-->
<settings-curtain></settings-curtain>

<!--PAGE DU LIVRE-->
<bookplate-curtain></bookplate-curtain>

<!--Ã€ PROPOS D'EARTHBOOK-->
<earthbook-curtain></earthbook-curtain>

<!--MENU DE PARTAGE-->
<share-curtain></share-curtain>

<!--MENU D'ACHAT-->
<buy-curtain></buy-curtain>

<!--MENU ECO-->
<eco-curtain></eco-curtain>

<div id="booknotes-curtain" class="overlay-tc">

    <div class="top-close-button">
        <a href="index.html"><img src="../icons/home.svg" alt="Bouton d'accueil" style="padding-right:10px;padding-left:10px;"></a>
        <img src="../svgs/bottom-x.svg" alt="Fermer le bouton" style="padding-left:10px;cursor:pointer" onclick="closeBooknotes()">
        <img src="../icons/search.svg?v=3" alt="Rechercher" style="padding-left:12px;padding-right:15px;cursor:pointer" onclick="closeBooknotes(), openSearch()">
    </div>
       
    <div class="overlay-content-tc">

        <div class="contents-title-box">
            <div class="contents-title">Your Saved</div>
            <div class="contents-books123">BOOK NOTESs</div>
        </div>
            <div class="book-notes-list">

                <div id="booknote-1">
                    <a href="chapter_url.html">
                    <div class="tc-item">
                        <div class="chapter-name-tc">the quotation would go here</div>
                        <div class="word-count-tc"><i>Chapter Name</i></div><br>
                        123 characters  / saved: July 2nd, 2023 - 8:50PM
                    </div></a>
                </div>

                <div id="booknote-2">
                    <a href="chapter_url.html">
                    <div class="tc-item">
                        <div class="chapter-name-tc">another bunch of text or a quoation form the book gooes here with the quotation would go here</div>
                        <div class="word-count-tc"><i>Chapter Name</i></div><br>
                        123 characters  / saved: July 2nd, 2023 - 8:50PM
                    </div></a>
                </div>

                <div id="booknote-2">
                    <a href="chapter_url.html">
                    <div class="tc-item">
                        <div class="chapter-name-tc">the maze of monsters dwells deep in the subconscious sub terranian depths of despairing dizzies.</div>
                        <div class="word-count-tc"><i>Chapter Name</i></div><br>
                        123 characters  / saved: July 2nd, 2023 - 8:50PM
                    </div></a>
                </div>
            </div>

            <div class="tc-button-row">
                <a href="index.html" style="height: 24px; flex-grow: 1"><div id="tour-btn" class="action-btn" ><i style="background-image: url(../icons/home.svg); width:22px; height:22px;display: inline-block;background-size: 22px;margin-bottom: -3px;margin-right: 3px;"></i></div></a>

                <div id="buy-btn" class="action-btn" onclick="closeContents(), guidedTour()" style="height: 24px;flex-grow: 1"><i style="background-image: url(../icons/tour.svg); width:22px; height:22px;display: inline-block;background-size: 22px;margin-bottom: -3px;margin-right: 5px; cursor:pointer;"></i> Tour</div>

                <div id="buy-btn" class="action-btn" onclick="openBuy()" style="height: 24px;flex-grow: 1"><i style="background-image: url(../icons/buy.svg); width:22px; height:22px;display: inline-block;background-size: 22px;margin-bottom: -3px;margin-right: 5px; cursor:pointer;"></i></div>

                <div id="buy-btn" class="action-btn" onclick="openBookplate()" style="height: 22px;flex-grow: 1"><i style="background-image: url(../icons/about.svg); width:22px; height:22px;display: inline-block;background-size: 22px;margin-bottom: -3px;margin-right: 5px; cursor:pointer;"></i></div>

                <div id="buy-btn" class="action-btn" onclick="openEco()" style="height: 24px;flex-grow: 1"><i style="background-image: url(../icons/eco-green.svg); width:22px; height:22px;display: inline-block;background-size: 22px;margin-bottom: -3px;margin-right: 0px; cursor:pointer;"></i></div>
                
                
            </div>
            <br><br>
        </div>
    </div>
               

            </div>

    </div>



<!--SECTION PIED DE PAGE Chapitre suivant: NÃ©cessite une personnalisation-->
  <div id="footer-chapter" style="margin-bottom: 0px;">
    <div class="footer-size">
      <div class="footer-left">
       <!-- <div id="footer-icon-left" style="cursor:pointer;" onclick="openFooter()"></div>-->
        <div class="next-section">
          <div class="next-sec">Annexe suivante :</div>
          <div class="sec-name"><i>Glossaire</i></div>
        </div>
      </div>
      <div class="footer-right">
        <a href="glossaire.html" title="Aller au prochain chapitre" aria-label="Aller au prochain chapitre"><div class="next-button">Suivant âž”</div></a>
      </div>
    </div>

<!--PIED DE PAGE DU CHAPITRE
-->

 <chap-foot></chap-foot>

  </div>
</div>
<!--FERMETURE DU PIED DE PAGE DU CHAPITRE-->
   
 
  

<script>

  let highlightClass = 'highlight';
    let preHighlightClass = 'pre-highlight';
    let selectedRange;


document.addEventListener("DOMContentLoaded", function() {
  

function getSelectedRange() {
        if (window.getSelection) {
            let sel = window.getSelection();
            if (sel.rangeCount) {
                return sel.getRangeAt(0);
            }
        } else if (document.selection && document.selection.createRange) {
            return document.selection.createRange();
        }
        return null;
    }

function clearSelection() {
        if (window.getSelection) {
            window.getSelection().removeAllRanges();
        } else if (document.selection) {
            document.selection.empty();
        }
    }

function handleSelection() {
  selectedRange = getSelectedRange();
  if (selectedRange && selectedRange.toString().trim().length > 0) {
    let span = document.createElement('span');
    span.style.cursor = 'pointer';
    span.classList.add(preHighlightClass);
    span.title = "Click this text to highlight and save.";
    selectedRange.surroundContents(span);
    clearSelection();
  }
}
document.addEventListener('mouseup', handleSelection);
document.addEventListener('touchend', handleSelection);


function handleHighlightEvent(e) {
  if (e.target.classList.contains(preHighlightClass)) {
    if (e.target.classList.contains(highlightClass)) {
      e.target.classList.remove(preHighlightClass);
    } else {
      e.target.classList.add(highlightClass);
      e.target.classList.remove(preHighlightClass);

      const range = document.createRange();
      range.selectNodeContents(e.target);
      const selection = window.getSelection();
      selection.removeAllRanges();
      selection.addRange(range);

      if (selection.rangeCount > 0) {
        const selectedRange = selection.getRangeAt(0);
        const startContainer = selectedRange.startContainer.parentNode.id;

        // Calculate startOffset considering only text nodes inside the selected paragraph
        let startOffset = 0;
        let node = selectedRange.startContainer.parentNode.firstChild;
        while (node && node !== selectedRange.startContainer) {
          if (node.nodeType === Node.TEXT_NODE) {
            startOffset += node.length;
          }
          node = node.nextSibling;
        }
        startOffset += selectedRange.startOffset;

        const storedNoteText = selection.toString();
        const noteChapter = "Appendix";

        // Retrieve existing bookNotes from local storage
        let bookNotes = JSON.parse(localStorage.getItem('bookNotes')) || [];

        // Add the new highlight to the array
        bookNotes.push({ startContainer, startOffset, storedNoteText, noteChapter });

        // Save the updated array back to local storage
        localStorage.setItem('bookNotes', JSON.stringify(bookNotes));

        alert(`storedNoteText: ${storedNoteText}, startContainer: ${startContainer}, startOffset: ${startOffset}, noteChapter: ${noteChapter}`);
      }

      e.target.title = "This quotation is saved in your Book Notes";
      window.getSelection().removeAllRanges();
    }
  } else if (e.target.classList.contains(highlightClass)) {
    setTimeout(() => removeHighlight(e), 1000);
  }
}

// Add both click and touchend listeners
document.addEventListener('click', handleHighlightEvent);
document.addEventListener('touchend', handleHighlightEvent);


function recreateSelection() {
  const bookNotes = JSON.parse(localStorage.getItem('bookNotes')) || [];

  bookNotes.forEach(note => {
    const { storedNoteText, startContainer, startOffset } = note;

    if (storedNoteText && startContainer && startOffset !== null) {
      // Find the element by the saved ID
      const container = document.getElementById(startContainer);

      if (container) {
        // Traverse through text nodes to find the correct position
        let node = container.firstChild;
        let currentOffset = 0;

        while (node) {
          if (node.nodeType === Node.TEXT_NODE) {
            if (currentOffset + node.length >= startOffset) {
              break;
            }
            currentOffset += node.length;
          }
          node = node.nextSibling;
        }

        if (node) {
          const range = document.createRange();
          range.setStart(node, startOffset - currentOffset);
          range.setEnd(node, startOffset - currentOffset + storedNoteText.length);

          const span = document.createElement('span');
          span.className = 'highlight';
          span.textContent = storedNoteText;

          range.deleteContents();
          range.insertNode(span);

          const selection = window.getSelection();
          selection.removeAllRanges();
          selection.addRange(range);
          selection.collapseToEnd();
        } else {
          alert('Stored text not found');
        }
      }
    }
  });
}


function removeHighlight(e) {
  // Define a one-time click handler
  function handleClick(event) {
    if (event.target.classList.contains(highlightClass)) {
      const text = event.target.textContent; // Assuming you want to replace the element with its text content
      const parentElementId = event.target.parentNode.id;
      const textLength = text.length;

      event.target.replaceWith(document.createTextNode(text)); // Remove the highlight

      // Remove the corresponding book note from the array
      let bookNotes = JSON.parse(localStorage.getItem('bookNotes')) || [];
      bookNotes = bookNotes.filter(note => {
        return !(note.startContainer === parentElementId && note.storedNoteText.length === textLength);
      });

      localStorage.setItem('bookNotes', JSON.stringify(bookNotes));
      // Since we're using the `once` option, there's no need to manually remove the listener
    }
  }
  // Add the one-time click handler with the `once` option
  document.addEventListener('click', handleClick, { once: true });
  document.addEventListener('touchend', handleClick);
}

});
</script>

  
  </BODY>
  </HTML>
  


